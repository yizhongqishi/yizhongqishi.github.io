---
layout: post
title: 论文学习笔记3
category: article
---
《A Review of Auto-scaling Techniques for Elastic Applications in Cloud Environments》<br/>
这是一篇2014年有关自动伸缩的综述，文中讲自动伸缩技术分为5种：基于静态阈值的规则，控制理论，强化学习，排队理论和时间序列分析。<br/>
资源缩放可以是水平的也可以是垂直的。在水平缩放（扩大/缩小）中，资源单元是服务器副本（在虚拟机上运行），并根据需要添加或释放新副本。相比之下，垂直缩放（放大/缩小）包括改变分配给已经运行的VM的资源，例如增加（或减少）分配的CPU功率或内存。大多数常见的操作系统不允许在运行的机器（即使是虚拟机）上进行即时（无需重新启动）——垂直的——更改;为此，大多数云提供商只提供水平缩放。<br/>
弹性伸缩的目标可以理解为寻找SLA和最小化租用云资源成本之间的最优均衡。<br/>
MAPE循环，首先，监控系统收集有关系统和应用程序状态的信息。自动定标器包含分析和计划阶段：它使用检索到的信息来估计未来的资源利用和需求（分析），然后计划适当的资源修改操作，例如移除VM或添加一些额外的内存。然后供应商将执行自动缩放器所要求的操作。<br/>
一些可以用来监控获取的信息：<br/>
硬件：每个虚拟机的CPU利用率，磁盘访问，网络接口访问，内存使用情况。<br/>
一般操作系统进程：每个进程的CPU时间，页面错误，实际内存（驻留集）。<br/>
负载平衡器：请求队列长度的大小，会话速率，当前会话数，传输字节数，拒绝请求数，错误数。<br/>
应用程序服务器：总线程数，活动线程数，已用内存，会话数，已处理请求，待处理请求，已删除请求，响应时间。<br/>
数据库：活动线程数，特定状态下的事务数（写，提交，回滚）。<br/>
Messagequeue：队列中的平均作业数，作业的排队时间。<br/>
在进行搜集的同时，也要考虑或许数据的时间粒度<br/>
请记住，从请求资源到实际可用的时间需要一些时间，并且这些延迟的限制可能是资源SLA的一部分。<br/>
 排队理论和时间序列分析在分析阶段是有用的，以便估计应用程序的当前使用情况或未来需求。 基于阈值的规则，强化学习和控制理论可以在规划阶段用于决定缩放行为，并且可以与之前的涉及例如时间序列分析的分析阶段相结合。<br/>
 基于阈值方法的简单思路：当前关注的性能值集合超过了最大值/最小值一段时间，则进行资源（节点本身或者节点内诸如CPU、内存等计算资源）的扩展/缩小，然后冷却一定时间。很明显，这种方式便于实现和部署，但是对于突发请求峰值并不明显，并且这显然是严重依赖先验经验的，无论是阈值的设定还是性能值集合中元素的选择，都是基于人工选择的。而且还要考虑的是，调整本身也可能造成性能值集合的震荡（就如上篇论文中考虑调整前后性能值回归估计一样），设定一个冷却时间来给服务器在调整后到完全正常运行一个缓冲是必要的，这也是基于阈值规则方法需要考虑的一个问题。但是我觉得实际上所有的被动式调度方案都需要这样的一个缓冲机制来，除非能够主动预测来将这个缓冲期提前并缩短。该方法可以通过和时间序列分析的方式进行简单的预测，或者通过投票机制由每一个运行该任务的节点按照某些规则进行投票来决定是否进行调整。也有根据对于SLA的违反情况动态修改阈值的情况，但这些都无法从根本上解决应对突发请求的情况。总之，该方法可以用来轻松地自动化特定应用程序的自动扩展，特别是在应用程序具有相当规则，可预测的模式的情况下。<br/>
强化学习<br/>
 在强化学习中，两个相邻时间点的状态是由相关性的，这样就会造成神经网络并不能够很好应用在上面。并且在强化学习的中间模型并不是可靠的，这就导致在在模型生成之前需要一个长时间的等待。这也说明了强化学习并不能应对调度度策略（或者是用户请求造成的服务器负载）突发改变的情况。<br/>
 排队论<br/>
 
* A—顾客相继到达的间隔时间的分布；
* B—服务时间的分布；
* C—服务台个数；
* K—系统容量限制（默认为∞）；
* M—顾客源数目（默认为∞）；
* D—服务规则 （默认为先到先服务FCFS)。

到达时间间隔A和服务时间B的最典型的分布模型有指数分布、定长分布、爱尔兰分布。到达间隔或服务时间将遵循指数分布。意味着确定性或恒定的时间。另一个常用的值是G，它对应于已知参数的一般分布。在单位时间内到达的请求数目（请求到达率）符合泊松分布。<br/>
排队论的使用更多的是对系统本身的运行情况进行模拟和分析，在策略更新上属于被动的方式。对于弹性调度系统的并不是最好的选择。<br/>
控制论<br/>
所谓的控制论就是控制器调整一定的性能参数，然后探测器获取系统性能值来让系统达到目标性能。包括开环、反馈、前馈等类型。开环是基于当前状态和目标状态的差值直接调整，不去探测调整后结果。反馈则是用实时性能和目标性能的差值调整控制器调整力度。<br/>
时间序列分析<br/>
所谓时间序列分析就是以时间为单位取数据点，然后进行响应的分析和预测。相比排队论不同的是，一个是针对请求数据进行的分析，一个是根据系统的性能数据（时间）进行的分析。<br/>
一些时间分析建模方法：

* 移动平均法：预测值X't+1为前n个时刻观测值的加权平均；
* 指数平滑法：预测值X't+1为当前时刻的观测值Xt乘上平滑因子a和当前时刻的预测值X't乘上（a－1）的和；在这基础上有一次指数平滑（已说）、二次指数平滑和三次指数平滑。其中移动平均法和一次指数平滑只能对水平型历史数据有好的预测作用，对于具有线性趋势的历史数据，应当使用多次指数平滑的方式建模。
* 其他方法不一一细说，用的时候再查

作者认为，为更好实现弹性伸缩，应该将工作重点放在为特定应用程序或应用程序类自动选择最佳预测技术上。这就与之前的文章出现了冲突。诚然，泛化应用程序需求能够减少工作复杂度，但是同样也会造成SLA违规情况严重。应当是将目前所有的应用请求进行分类，对于不同类别的不同特点选择相应的方式。<br/>
反应式自动缩放系统可能无法应对输入工作量的突然变化，特别是在突发流量激增的情况下。其中一个原因是获取和设置新资源所需的时间（例如新实例的启动时间）。似乎有必要将研究重点转向开发能够预测未来需求的主动式自动缩放系统，并获得足够预期的相应资源，也许可以使用一些反应性方法来纠正可能的预测误差。另外，还应注意减少提供新VM所需时间的方法，包括那些利用垂直缩放操作（通常只需要几秒钟就可以完成）的时间。<br/>
我们认为，自动扩展系统应该利用时间序列分析技术的预测能力，以及控制器的自动化能力。